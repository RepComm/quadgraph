<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Quadgraph</title>
    <style>
        body {
            background-color: rgb(83, 83, 83);
            margin: 0px;
            padding: 0px;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        #canvas {
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100%;
        }
        #formula {
            position:absolute;
            top:10%;
            left:10%;
        }
    </style>
</head>

<body>
    <input id="formula" value="3x^2 - 11x - 4" />
    <canvas id="canvas">

    </canvas>
    <script type="text/JavaScript" src="function_alias.js"></script>
    <script type="text/JavaScript" src="math.js"></script>
    <script type="text/JavaScript" src="quadgraph.js"></script>

    <script type="text/JavaScript">
    let iFormula = get("formula");
    //Get a canvas
    let canv = get("canvas");
    let ctx = canv.getContext("2d");
    let r = rect(canv);
    canv.width = r.width;
    canv.height = r.height;
    
    let zoom = 10;

    let p0 = new Parabola("2x^2");
    on(iFormula, "keyup", (evt)=>{
        p0 = new Parabola(iFormula.value);
        render();
    });
    
    function render () {
        ctx.clearRect(0, 0, r.width, r.height);
        ctx.save();
        ctx.translate(r.width/2, r.height/2);

        ctx.scale(zoom, -zoom);
        
        renderGrid(ctx, 20, zoom);

        p0.render(ctx, zoom);
        ctx.restore();

        ctx.save();
        ctx.translate(r.width/2, r.height/2);
        ctx.fillStyle = "#fff";
        ctx.font = "30px Courier";
        ctx.fillText(p0.polynomial.toString(), 0,0);
        ctx.restore();
    }

    render();

    on(canv, "wheel", (evt)=>{
        evt.preventDefault();
        zoom -= evt.deltaY;
        if (zoom < 0.01) zoom = 0.01;
        render();
    });

    </script>
</body>

</html>